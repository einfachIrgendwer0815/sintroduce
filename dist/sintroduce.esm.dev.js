/*!
* MIT licensed
*
* Copyright (C) 2022 einfachIrgendwer0815
*/
class e{constructor(e){this.action="present",this.data={element:e}}}class t{constructor(e){this.elements=void 0===e?new Array:e}toArray(){return[...this.elements]}includes(e){return this.elements.includes(e)}append(e){this.elements.push(e)}remove(){if(0!=this.elements.length)return this.elements.splice(0,1)[0]}reverseAppend(e){this.elements=[e].concat(this.elements)}reverseRemove(){if(0!=this.elements.length)return this.elements.pop()}clear(){this.elements=new Array}copy(){return new t([...this.elements])}peek(){if(0!=this.elements.length)return this.elements[0]}length(){return this.elements.length}}class s{constructor(e){this.names=e,this.timeStatedElements=[],this.package={id:0,name:"",instructions:new t}}feedData(t){this.package.instructions.clear();for(var s=0;s<t.children.length;s++){var i=t.children[s];if("SECTION"==i.tagName){var n=i.getElementsByClassName("fragment");this.package.instructions.append(new e(i));for(var r=0;r<n.length;r++)this.package.instructions.append(new e(n[r])),this.timeStatedElements.push(n[r]);this.timeStatedElements.push(i)}}}getListOfTimeStatedObjects(){return[...this.timeStatedElements]}getNavigationPackages(){return[{id:0,name:"",instructions:this.package.instructions.copy()}]}getFirstPackageId(){return 0}}var i;!function(e){e.SimpleSlideshow="SimpleSlideshow"}(i||(i={}));const n={SimpleSlideshow:class{constructor(e){this.names=e,this.mapper=new s(this.names)}initialize(e,t){this.setupViewport(e),this.copyContent(t)}setupViewport(e){this.viewport=document.createElement("div"),this.viewport.id=this.names.viewport,e.appendChild(this.viewport)}copyContent(e){Array.from(e.children).forEach((e=>{this.viewport.appendChild(e)})),e.remove()}getViewport(){return this.viewport}getMapper(){return this.mapper}}},r={autoStart:!0,generalPrefix:"sintroduce",viewportId:"viewport",containerName:"container",pastClass:"past",presentClass:"present",futureClass:"future",dataAttributePrefix:"data",presentationTheme:i.SimpleSlideshow};class a{constructor(e){this.elements=void 0!==e?e:new Array}push(e){this.elements.push(e)}pop(){if(0!=this.elements.length){var e=this.elements.at(-1);return this.elements.pop(),e}}peek(){if(0!=this.elements.length)return this.elements.at(-1)}toArray(){return[...this.elements]}includes(e){return this.elements.includes(e)}clear(){this.elements=new Array}copy(){return new a([...this.elements])}length(){return this.elements.length}}const h={present:function(e,t,s){if(t.length()>0){let i=function(e,t){var s=[],i=e.parentElement,n=e.parentElement.id==t.viewport;for(;!n;)"1"==i.getAttribute("time-stated")&&s.push(i),i.parentElement.id==t.viewport&&(n=!0),i=i.parentElement;return s}(e.data.element,s);for(;t.length()>0&&!i.includes(t.peek());){o(t.pop())}for(let e=i.length-1;e>=0;e--)t.includes(i[e])||(p(i[e]),t.push(i[e]))}p(e.data.element),t.push(e.data.element)}};function o(e){e.classList.remove("present"),e.classList.remove("future"),e.classList.add("past")}function p(e){e.classList.remove("past"),e.classList.remove("future"),e.classList.add("present")}class l{constructor(e,t,s){this.viewport=e,this.mapper=t,this.names=s,this.position=new Array,this.mapper.feedData(e),this.packages=this.mapper.getNavigationPackages(),this.loadPackage(this.mapper.getFirstPackageId()),this.setInitialClasses()}setInitialClasses(){for(var e=this.mapper.getListOfTimeStatedObjects(),t=0;t<e.length;t++)e[t].classList.add("future"),e[t].setAttribute("time-stated","1")}loadPackage(e){var t;for(let s=0;s<this.packages.length;s++)this.packages[s].id==e&&(t=this.packages[s]);null!=t&&(this.future=t.instructions,this.past=new a,this.present=new a,this.pastStacks=new a)}next(){var e=this.future.remove();null!=e&&(this.pastStacks.push(this.present.copy()),function(e,t,s){null!=h[e.action]&&h[e.action](e,t,s)}(e,this.present,this.names),this.past.push(e))}back(){}getPosition(){return this.position}}class c{constructor(){this.isReady=!1,this.hasStarted=!1,this.paused=!1,this.names={}}initialize(e){this.options=function(e){var t=Object.assign({},r);for(var s in e)typeof e[s]==typeof r[s]&&(t[s]=e[s]);return t}(e),this.generateNames(),this.checkForContainer()&&(null!=i[this.options.presentationTheme]?(this.theme=new n[this.options.presentationTheme](this.names),this.theme.initialize(document.body,document.getElementById(this.names.container)),this.navigator=new l(this.theme.getViewport(),this.theme.getMapper(),this.names),this.navigator.next(),this.isReady=!0):console.error(`'${this.options.presentationTheme}' is not a valid presentationTheme.`))}generateNames(){this.names.viewport=this.options.generalPrefix.concat("-",this.options.viewportId),this.names.container=this.options.generalPrefix.concat("-",this.options.containerName)}checkForContainer(){return null!=document.getElementById(this.names.container)}getPosition(){return this.navigator.getPosition()}getIsReady(){return this.isReady}getHasStarted(){return this.hasStarted}getPaused(){return this.paused}getOption(e){return this.options[e]}}var m=new c;m.VERSION="0.1.0-dev",m.AUTHOR="einfachIrgendwer0815",m.LICENSE="MIT";export{t as Queue,e as SetPresent,c as Sintro,m as Sintroduce,a as Stack};
//# sourceMappingURL=sintroduce.esm.dev.js.map
